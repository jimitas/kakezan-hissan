# かけ算の筆算練習アプリ

小学生向けの**かけ算の筆算**を楽しく学べるWebアプリケーションです。ドラッグ&ドロップで直感的に操作でき、正解するとコインが貯まるゲーミフィケーション要素で学習意欲を高めます。

![かけ算の筆算練習アプリ](https://img.shields.io/badge/算数-かけ算の筆算-blue) ![対象学年](https://img.shields.io/badge/対象-小学3〜4年生-green) ![ライセンス](https://img.shields.io/badge/license-MIT-orange)

## 🎯 対象

- **小学3〜5年生**を主な対象とした算数学習アプリ
- かけ算の筆算を基礎から応用まで学習したい児童
- 学校や家庭での自主学習、宿題サポートに最適
- タブレット（iPad等）での使用を推奨

## ✨ 主な機能

### 📚 豊富な問題タイプ
10種類の問題モードから選択可能：

1. **(2桁)×(1桁)** - 基礎レベル
2. **(3桁)×(1桁)** - 基礎レベル
3. **(2桁)×(2桁)** - 標準レベル
4. **(3桁)×(2桁)** - 標準レベル
5. **小数(○.○)×(1桁)** - 応用レベル
6. **小数(○.○○)×(1桁)** - 応用レベル
7. **小数(○.○)×(2桁)** - 応用レベル
8. **小数(○.○○)×(2桁)** - 応用レベル
9. **小数(○.○)×小数(○.○)** - 発展レベル
10. **小数(○.○○)×小数(○.○)** - 発展レベル

### 🎮 直感的な操作
- **ドラッグ&ドロップ**で数字を配置
- マウス・タッチ操作の両方に対応
- 数字パレットから筆算マスへ自由に移動
- ゴミ箱アイコンで不要な数字を削除

### 🎵 音声フィードバック
- 正解時の効果音
- 操作時のフィードバック音
- 直感的な学習体験

### 💰 コインシステム（ゲーミフィケーション）
- 正解するとコインを獲得
- **ローカルストレージに自動保存** - ページを閉じても記録が残る
- コインの累積でモチベーション維持
- スクロール可能なコイン表示エリア（最大3段分表示）

### 🔒 いたずら防止機能（重要な特徴）
コインリセット時に**3桁×2桁の計算問題**を出題：
- 例：「345 × 67 = ?」
- ランダム生成で毎回異なる問題
- 正解しないとリセットできない仕組み
- 友達のいたずらや誤操作を防止
- 不正解の場合は正解を表示（学習要素）

### 🎓 学習サポート機能
- **ヒント機能** - 2桁のかける数の場合、途中計算を表示
- **答えを見る機能** - 解答プロセス全体を確認
- **リアルタイム答え表示** - 入力中の答えが式に表示される
- **エラー検出** - NaN発生時にアラート表示

### 📱 レスポンシブデザイン
- **タブレット最適化** - iPadなどで一画面に収まる設計
- デスクトップ・タブレット・スマホ対応
- 画面サイズに応じた自動調整

## 🚀 使い方

### 基本的な流れ

1. **問題モードを選択**
   - プルダウンメニューから学習したい問題タイプを選択

2. **「問題」ボタンをクリック**
   - ランダムな問題が表示されます

3. **筆算を解く**
   - 数字パレットから数字をドラッグ&ドロップ
   - 筆算マスに配置して計算
   - 小数点はクリックで配置可能

4. **「答え合わせ」をクリック**
   - 正解するとコインを獲得！
   - 不正解の場合は再チャレンジ

### ボタン説明

| ボタン | 機能 |
|--------|------|
| **問題** | 新しい問題を表示 |
| **答え合わせ** | 入力した答えをチェック |
| **答えを見る** | 正解と途中式を表示 |
| **消す** | 入力した数字をすべて消去 |
| **ヒント** | 途中計算を表示（2桁のかける数の場合） |
| **コインをリセット** | 計算問題に正解するとコインをリセット |

## 🛠️ 技術仕様

### 使用技術

#### フロントエンド
- **HTML5** - セマンティックマークアップ
- **CSS3** - レスポンシブデザイン、Flexbox
- **JavaScript (ES6+)** - モジュール、アロー関数、テンプレートリテラル
- **Bootstrap 5.3.0** - UIフレームワーク

#### ライブラリ
- **Howler.js** - Web Audio API ベースの音声ライブラリ

#### データ管理
- **localStorage API** - コイン数の永続化保存

### ファイル構成

```
kake-hissan/
├── index.html              # メインHTML
├── style.css               # スタイルシート（レスポンシブ対応）
├── index.js                # エントリーポイント
├── hissan.js               # メインロジック
├── createTable.js          # 筆算テーブル生成
├── createSelectBox.js      # 問題モード選択UI
├── se.js                   # 効果音管理
├── howler.min.js           # Howler.js ライブラリ
├── images/
│   ├── coin.png           # コイン画像
│   └── gomibako.png       # ゴミ箱アイコン
└── Sounds/
    ├── pi.mp3             # 配置音
    ├── set.mp3            # 問題作成音
    ├── seikai.mp3         # 正解音1
    ├── seikai2.mp3        # 正解音2
    ├── reset.mp3          # リセット音
    ├── right.mp3          # 確認音
    ├── move1.mp3          # 移動音1
    ├── move2.mp3          # 移動音2
    ├── alert.mp3          # アラート音
    └── kako.mp3           # 過去音
```

### 主な機能の実装

#### 1. ドラッグ&ドロップ
- **マウス操作**: HTML5 Drag and Drop API
- **タッチ操作**: Touch Events API (touchstart, touchmove, touchend)

#### 2. 問題生成アルゴリズム
- 各桁の数字をランダム生成
- 最上位桁は0にならないよう制御
- 小数点位置の自動調整

#### 3. 浮動小数点誤差の修正
```javascript
const ratio = multiplicandDigitRatio[selectIndex] * multiplierDigitRatio[selectIndex];
collectAnswer = Math.round(collectAnswer * ratio) / ratio;
```

#### 4. ローカルストレージ管理
- コイン数の保存: `localStorage.setItem("coinCount", count)`
- 読み込み: `localStorage.getItem("coinCount")`
- 削除: `localStorage.removeItem("coinCount")`

#### 5. リセット防止機能
- 3桁×2桁のランダム計算問題生成
- `prompt()` による入力受付
- 正解判定後にリセット実行

### レスポンシブブレークポイント

- **〜480px**: スマホ
- **768px〜1024px**: タブレット（最適化）
- **1025px〜**: デスクトップ

### ブラウザ対応

- Google Chrome (推奨)
- Safari (iOS Safari含む)
- Microsoft Edge
- Firefox

## 📦 インストール・起動方法

### 1. クローン
```bash
git clone https://github.com/yourusername/kakezan-hissan.git
cd kakezan-hissan
```

### 2. ローカルサーバーで起動
```bash
# Python 3の場合
python -m http.server 8000

# Node.jsのhttp-serverの場合
npx http-server
```

### 3. ブラウザでアクセス
```
http://localhost:8000
```

または、`index.html`を直接ブラウザで開くことも可能です。

## 🎨 カスタマイズ

### 問題の難易度調整
`hissan.js` の配列を編集：
```javascript
const multiplicandDigit = [2, 3, 2, 3, 2, 3, 2, 3, 2, 3]; // 被乗数の桁数
const multiplierDigit = [1, 1, 2, 2, 1, 1, 2, 2, 2, 2];   // 乗数の桁数
```

### 効果音の変更
`Sounds/` フォルダ内のmp3ファイルを差し替え

### コイン表示エリアの高さ調整
`style.css` の `#score-pallet` を編集：
```css
#score-pallet {
  max-height: 10vw; /* お好みの値に変更 */
}
```

## 🔧 トラブルシューティング

### コインが保存されない
- ブラウザのプライベートモード（シークレットモード）では動作しません
- ブラウザの設定でlocalStorageが有効になっているか確認

### ドラッグ&ドロップが動作しない
- タッチ操作の場合、画面のスクロールが干渉している可能性があります
- ブラウザを最新版に更新してください

### 音が鳴らない
- ブラウザの音声がミュートになっていないか確認
- モバイルブラウザでは初回タップ後に音声が有効化されます

## 🌟 今後の改善予定

- [ ] 問題履歴の保存
- [ ] 正答率の記録・グラフ表示
- [ ] タイマー機能
- [ ] 複数ユーザー対応
- [ ] PWA化（オフライン対応）

## 📄 ライセンス

MIT License

## 👨‍💻 開発者

開発者: Jimitas
GitHub: [https://github.com/jimitas](https://github.com/jimitas)

## 🙏 謝辞

- Bootstrap チーム - UIフレームワーク
- Howler.js - 音声ライブラリ
- Claude (Anthropic) - コード生成支援

---

## 📈 SEO キーワード

小学生 算数, かけ算 筆算, 掛け算 練習, 算数 アプリ, 学習アプリ, 無料 教育, 小学3年生 算数, 小学4年生 算数, 筆算 練習問題, ドリル, オンライン学習, タブレット学習, 小数 掛け算, 2桁×2桁, 3桁×2桁, 算数ゲーム, 教育ゲーム, 自主学習, 宿題サポート, Web教材

**Keywords**: multiplication practice, vertical multiplication, elementary school math, Japanese education app, gamification learning, drag and drop math, tablet learning app

---

⭐ このプロジェクトが役に立った場合は、GitHubでスターをお願いします！
